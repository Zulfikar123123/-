<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>[ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡]</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="https://pomf2.lain.la/f/odvlatpw.jpg">
    <meta name="theme-color" content="#e63946">

    <script src="https://twigcrucialpal.com/a8/03/68/a80368812dec3f6d3f22da29616fb388.js"></script>

    <style>
        :root { 
            --main-red: #e63946; 
            --bg-page: #f8f9fa; 
            --card-bg: #ffffff;
            --text-main: #2b2d42;
            --search-bg: #f1f3f4;
            --gray: #888;
        }

        body.dark-theme { 
            --bg-page: #121212; 
            --card-bg: #1e1e1e;
            --text-main: #f1f1f1;
            --search-bg: #2d2d2d;
        }

        body { 
            background-color: var(--bg-page); color: var(--text-main); 
            font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; 
            transition: 0.3s; overflow-x: hidden;
        }

        .app-header { background: var(--card-bg); padding: 15px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
        .header-icons { display: flex; gap: 18px; align-items: center; }
        .app-title { font-size: 19px; font-weight: bold; color: var(--main-red); margin: 0; }
        .search-wrapper { padding: 5px 15px 15px 15px; background: var(--card-bg); }
        .search-input { width: 100%; padding: 12px 20px; border-radius: 25px; border: none; background: var(--search-bg); color: var(--text-main); outline: none; box-sizing: border-box; font-size: 14px; }

        .tabs { display: flex; background: var(--card-bg); margin: 15px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; color: var(--gray); font-weight: bold; cursor: pointer; font-size: 12px; }
        .tab-btn.active { background: var(--main-red); color: white; }

        .grid { display: none; padding: 0 15px 15px 15px; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .grid.active { display: grid; }
        
        .section-title { grid-column: 1 / span 2; font-size: 16px; font-weight: bold; color: var(--main-red); margin: 10px 0 5px 0; border-right: 4px solid var(--main-red); padding-right: 10px; }

        .card { background: var(--card-bg); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: 0.2s; position: relative; cursor: pointer; }
        .card img { width: 100%; height: 135px; object-fit: cover; border-bottom: 3px solid var(--main-red); }
        .card-info { padding: 10px; font-size: 12px; text-align: center; font-weight: bold; }
        
        .card-price { display: block; color: var(--main-red); font-size: 11px; margin-top: 4px; font-weight: bold; }

        /* Ø³ØªØ§ÙŠÙ„ Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ */
        #product-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-page); z-index: 5000; flex-direction: column; overflow-y: auto;
        }
        .p-content { padding: 20px; }
        .p-image-container { display: flex; overflow-x: auto; gap: 10px; margin-bottom: 15px; }
        .p-image-container img { width: 80%; border-radius: 10px; flex-shrink: 0; }
        .p-price-tag { font-size: 20px; color: var(--main-red); font-weight: bold; margin: 10px 0; }
        .p-delivery { color: #28a745; font-weight: bold; margin-bottom: 10px; }
        .p-note { background: #fff3cd; padding: 10px; border-radius: 8px; margin: 15px 0; font-size: 14px; text-align: center; }
        
        .order-buttons { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .order-btn { padding: 15px; border-radius: 10px; text-decoration: none; color: white; text-align: center; font-weight: bold; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .whatsapp-btn { background: #25d366; }
        .telegram-btn { background: #0088cc; }

        #player, #series-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-page); z-index: 3000; flex-direction: column; overflow-y: auto; }
        .video-box { width: 100%; background: #000; position: sticky; top: 0; }
        .close-btn { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; border: none; padding: 8px 15px; border-radius: 20px; z-index: 6000; font-weight: bold; cursor: pointer; }

        #ad-locker {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000000; z-index: 9999; flex-direction: column;
            align-items: center; justify-content: center; color: white; text-align: center;
        }
        .btn-close-red { background: #ff0000; color: white; border: none; padding: 10px 20px; font-weight: bold; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body id="main-body">

<div id="product-overlay">
    <button class="close-btn" onclick="document.getElementById('product-overlay').style.display='none'">Ø¥ØºÙ„Ø§Ù‚ X</button>
    <div class="p-content">
        <h2 id="p-title" style="margin-top: 50px;"></h2>
        <div class="p-image-container" id="p-images"></div>
        <div class="p-price-tag" id="p-price"></div>
        <div class="p-delivery" id="p-del-price">ØªÙˆØµÙŠÙ„: 5,000 Ø¯.Ø¹</div>
        <div class="p-note">ğŸ“¦ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</div>
        <p id="p-desc"></p>
        
        <div class="order-buttons">
            <a href="#" id="p-whatsapp" class="order-btn whatsapp-btn">Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ğŸ’¬</a>
            <a href="#" id="p-telegram" class="order-btn telegram-btn">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ØªÙ„ÙŠØ¬Ø±Ø§Ù… âœˆï¸</a>
        </div>
    </div>
</div>

<div id="ad-locker">
    <div style="position: absolute; top: 20px; right: 20px;">
        <button class="btn-close-red" onclick="closeLocker()">Ø¥ØºÙ„Ø§Ù‚ X</button>
    </div>
    <div style="color: #ff0000; font-size: 28px; font-weight: bold; margin-bottom: 30px;" id="locker-status">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</div>
    <div style="font-size: 18px; margin: 0 40px 40px 40px; line-height: 1.6;" id="locker-message">
        ÙŠØ¬Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ø¯Ù†Ø§Ù‡ ÙˆØ§Ù„Ø¨Ù‚Ø§Ø¡ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†Ù Ù„ÙØªØ­ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    </div>
    <a href="https://twigcrucialpal.com/kvwft44afa?key=cb80200a80e072a4d94407f211fa613c" target="_blank" id="smart-link-btn" style="background: #28a745; color: white; padding: 20px; width: 85%; max-width: 400px; text-decoration: none; border-radius: 12px; font-size: 20px; font-weight: bold; display: block;" onclick="startStrictCheck()">
        Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø§Ø¹Ù„Ø§Ù† Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†ÙŠ
    </a>
</div>

<div class="app-header">
    <div class="header-icons"><span onclick="toggleDarkMode()">ğŸŒ™</span><span onclick="document.getElementById('mainSearch').focus()">ğŸ”</span></div>
    <div class="app-title">[ÙˆØ§ØªÙ€Ø¨Ù€Ø§Ø¯ Ø§Ù„Ù€ÙÙ€Ù‚Ù€Ø±Ø§Ø¡]</div>
</div>

<div class="search-wrapper">
    <input type="text" id="mainSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ Ø£Ùˆ Ù‚ØµØ©..." onkeyup="filterNow()">
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab(event, 'watt-grid')">ğŸ“– Ø§Ù„Ù‚ØµØµ</button>
    <button class="tab-btn" onclick="showTab(event, 'ser-grid')">ğŸ¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
    <button class="tab-btn" onclick="showTab(event, 'prod-grid')">ğŸ›ï¸ Ù…Ù†ØªØ¬Ø§ØªÙŠ</button>
    <button class="tab-btn" onclick="showTab(event, 'history-grid'); updateHistoryUI();">ğŸ•’ Ø§Ù„Ø³Ø¬Ù„</button>
</div>

<div class="grid active" id="watt-grid">
    <div class="card" data-title="Ù†Ù€Ù‡Ù€ÙˆØ© ØºÙ€Ø¸Ù€Ø¨ Ø§Ù„Ù€Ø´ÙŠÙ€Ø® + Ø¬Ù€Ø±ÙŠÙ€Ø¦Ù€Ø© ÙƒÙ€Ù„Ù€Ø´ || Ø§Ù„Ù€Ø¬Ù€Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø®ÙŠØ±" onclick="lockVideo('lyla_01', 'Ù†Ù€Ù‡Ù€ÙˆØ© ØºÙ€Ø¸Ù€Ø¨ Ø§Ù„Ù€Ø´ÙŠÙ€Ø® + Ø¬Ù€Ø±ÙŠÙ€Ø¦Ù€Ø© ÙƒÙ€Ù„Ù€Ø´ || Ø§Ù„Ù€Ø¬Ù€Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§Ø®ÙŠØ±', 'https://pomf2.lain.la/f/9tc3wh3k.mp4', 'https://pomf2.lain.la/f/pdevqs9u.jpg')">
        <img src="https://pomf2.lain.la/f/pdevqs9u.jpg">
        <div class="card-info">Ù†Ù€Ù‡Ù€ÙˆØ© ØºÙ€Ø¸Ù€Ø¨ Ø§Ù„Ù€Ø´ÙŠÙ€Ø® + Ø¬Ù€Ø±ÙŠÙ€Ø¦Ù€Ø© ÙƒÙ€Ù„Ù€Ø´</div>
    </div>
</div>

<div class="grid" id="ser-grid">
    <div class="card" data-title="Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶">
        <img src="https://pomf2.lain.la/f/2njdz3ym.jpg"><div class="card-info">Ù…Ø³Ù„Ø³Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶</div>
    </div>
</div>

<div class="grid" id="prod-grid">
    <div class="section-title">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø·Ø¨Ø® ÙˆØ§Ù„Ù…Ù†Ø²Ù„</div>
    
    <div class="card" data-title="ÙƒØ§Ø¨Ø³Ø© ØµØ§Ø¬ Ø³Ø§Ù…ÙƒØ³" onclick="openProduct('ÙƒØ§Ø¨Ø³Ø© ØµØ§Ø¬ Ù…Ù† Ø³Ø§Ù…ÙƒØ³', 'ÙƒØ§Ø¨Ø³Ø© ØµØ§Ø¬ Ø¹Ù…Ù„ÙŠØ© ÙˆØ³Ø±ÙŠØ¹Ø© Ù…Ù† Ù…Ø§Ø±ÙƒØ© Ø³Ø§Ù…ÙƒØ³ Ø§Ù„Ø´Ù‡ÙŠØ±Ø©.', '25,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/rt8zjh9o.png', 'https://pomf2.lain.la/f/ibc3paos.png', 'https://pomf2.lain.la/f/grwm1uji.png'])">
        <img src="https://pomf2.lain.la/f/rt8zjh9o.png"><div class="card-info">ÙƒØ§Ø¨Ø³Ø© ØµØ§Ø¬ Ø³Ø§Ù…ÙƒØ³ <span class="card-price">25,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ù…Ø¹ØµØ§Ø±Ø© ÙÙˆØ§ÙƒØ© Ø³Ø§Ù…ÙƒØ³" onclick="openProduct('Ù…Ø¹ØµØ§Ø±Ø© ÙÙˆØ§ÙƒØ© Ù…Ø§Ø±ÙƒØ© Ø³Ø§Ù…ÙƒØ³', 'Ù…Ø¹ØµØ§Ø±Ø© ÙÙˆØ§ÙƒØ© Ù‚ÙˆÙŠØ© Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¹ØµÙŠØ± Ø§Ù„Ø·Ø§Ø²Ø¬.', '50,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/pe4zwmm5.png', 'https://pomf2.lain.la/f/qfoay45d.png'])">
        <img src="https://pomf2.lain.la/f/pe4zwmm5.png"><div class="card-info">Ù…Ø¹ØµØ§Ø±Ø© ÙÙˆØ§ÙƒØ© Ø³Ø§Ù…ÙƒØ³ <span class="card-price">50,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ø´ÙŠØ´ Ø´ÙˆØ§Ø¡ Ù„Ù„Ù‚Ù„Ø§ÙŠØ§Øª" onclick="openProduct('Ø´ÙŠØ´ Ø´ÙˆØ§Ø¡ Ù„Ù„Ù‚Ù„Ø§ÙŠØ§Øª', 'Ù…Ù„Ø­Ù‚ Ø´ÙŠØ´ Ø´ÙˆØ§Ø¡ Ù…Ø®ØµØµ Ù„Ù„Ù‚Ù„Ø§ÙŠØ§Øª Ø§Ù„Ù‡ÙˆØ§Ø¦ÙŠØ©.', '10,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/tvok04eu.png', 'https://pomf2.lain.la/f/0oef9b3o.png'])">
        <img src="https://pomf2.lain.la/f/tvok04eu.png"><div class="card-info">Ø´ÙŠØ´ Ø´ÙˆØ§Ø¡ Ù„Ù„Ù‚Ù„Ø§ÙŠØ§Øª <span class="card-price">10,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ù…Ø¹ØµØ§Ø±Ø© Ø¯ÙŠØ¬ØªØ§Ù„ Ø§Ù…Ø¨Ù„ÙŠÙˆÙ…" onclick="openProduct('Ù…Ø¹ØµØ§Ø±Ø© ÙÙˆØ§ÙƒØ© Ø¯ÙŠØ¬ØªØ§Ù„ Ø§Ù…Ø¨Ù„ÙŠÙˆÙ…', 'Ù…Ø¹ØµØ§Ø±Ø© Ø¯ÙŠØ¬ØªØ§Ù„ Ù…ØªØ·ÙˆØ±Ø© Ù…Ù† Ù…Ø§Ø±ÙƒØ© Ø§Ù…Ø¨Ù„ÙŠÙˆÙ….', '70,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/p8q0p7aj.png', 'https://pomf2.lain.la/f/9mi5w69p.png'])">
        <img src="https://pomf2.lain.la/f/p8q0p7aj.png"><div class="card-info">Ù…Ø¹ØµØ§Ø±Ø© Ø¯ÙŠØ¬ØªØ§Ù„ <span class="card-price">70,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ø·Ø¨Ø§Ø® ØºØ§Ø² 3 Ø¹ÙŠÙˆÙ†" onclick="openProduct('Ø·Ø¨Ø§Ø® ØºØ§Ø² 3 Ø¹ÙŠÙˆÙ†', 'Ø·Ø¨Ø§Ø® ØºØ§Ø²ÙŠ Ù…Ù†Ø²Ù„ÙŠ Ø¨Ù€ 3 Ø¹ÙŠÙˆÙ†.', '22,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/dbw5hqis.png', 'https://pomf2.lain.la/f/v14qulqu.png'])">
        <img src="https://pomf2.lain.la/f/dbw5hqis.png"><div class="card-info">Ø·Ø¨Ø§Ø® ØºØ§Ø² 3 Ø¹ÙŠÙˆÙ† <span class="card-price">22,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ø¬Ù‡Ø§Ø² ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø§ÙØ·Ø§Ø± 3 ÙÙŠ 1" onclick="openProduct('Ø¬Ù‡Ø§Ø² ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø§ÙØ·Ø§Ø± 3 ÙÙŠ 1 Ø±Ø§Ù', 'Ø¬Ù‡Ø§Ø² Ù…ØªÙƒØ§Ù…Ù„ Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø§ÙØ·Ø§Ø± Ù…Ø§Ø±ÙƒØ© Ø±Ø§Ù.', '40,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/0ynrfgx.png', 'https://pomf2.lain.la/f/wu4yalx5.png'])">
        <img src="https://pomf2.lain.la/f/0ynrfgx.png"><div class="card-info">Ø¬Ù‡Ø§Ø² Ø§Ù„Ø§ÙØ·Ø§Ø± 3 ÙÙŠ 1 <span class="card-price">40,000 Ø¯.Ø¹</span></div>
    </div>

    <div class="card" data-title="Ø·Ù‚Ù… Ù‚Ø¯ÙˆØ± Ù…ÙŠÙ†Ø§ 5 Ù‚Ø·Ø¹" onclick="openProduct('Ø·Ù‚Ù… Ù‚Ø¯ÙˆØ± Ù…ÙŠÙ†Ø§ ÙØ§Ø®Ø± 5 Ù‚Ø·Ø¹', 'Ø·Ù‚Ù… Ù‚Ø¯ÙˆØ± ÙØ§Ø®Ø± Ø¨ØºØ·Ø§Ø¡ Ø²Ø¬Ø§Ø¬ÙŠ.', '30,000 Ø¯.Ø¹', '5,000 Ø¯.Ø¹', ['https://pomf2.lain.la/f/yajdiwi4.png', 'https://pomf2.lain.la/f/yqbhogv0.png'])">
        <img src="https://pomf2.lain.la/f/yajdiwi4.png"><div class="card-info">Ø·Ù‚Ù… Ù‚Ø¯ÙˆØ± Ù…ÙŠÙ†Ø§ <span class="card-price">30,000 Ø¯.Ø¹</span></div>
    </div>
</div>

<div class="grid" id="history-grid"></div>

<div id="player">
    <button class="close-btn" onclick="backToMain('player')">Ø¥ØºÙ„Ø§Ù‚</button>
    <div class="video-box" id="video-root"></div>
    <div class="product-details"><h2 id="v-title"></h2></div>
</div>

<script>
    // Ø¯Ø§Ù„Ø© ÙØªØ­ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
    function openProduct(title, desc, price, delPrice, imgs) {
        document.getElementById('p-title').innerText = title;
        document.getElementById('p-desc').innerText = desc;
        document.getElementById('p-price').innerText = "Ø§Ù„Ø³Ø¹Ø±: " + price;
        document.getElementById('p-del-price').innerText = "Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„: " + delPrice;
        
        // Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„
        const msg = encodeURIComponent("Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£ÙˆØ¯ Ø·Ù„Ø¨ Ù…Ù†ØªØ¬: " + title);
        document.getElementById('p-whatsapp').href = "https://wa.me/9647860526345?text=" + msg;
        document.getElementById('p-telegram').href = "https://t.me/Z_U_L_f_I_Q_A";
        
        // Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±
        const imgCont = document.getElementById('p-images');
        imgCont.innerHTML = "";
        imgs.forEach(src => {
            imgCont.innerHTML += `<img src="${src}">`;
        });
        
        document.getElementById('product-overlay').style.display = 'flex';
    }

    let videoQueue = null;
    let startTime = 0;
    let isWatchingAd = false;

    function lockVideo(id, title, url, thumb) {
        videoQueue = {id, title, url, thumb};
        resetLocker();
        document.getElementById('ad-locker').style.display = 'flex';
    }

    function resetLocker() {
        isWatchingAd = false;
        startTime = 0;
        const btn = document.getElementById('smart-link-btn');
        btn.innerText = "Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø§Ø¹Ù„Ø§Ù† Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†ÙŠ";
        btn.onclick = startStrictCheck;
    }

    function startStrictCheck() {
        startTime = Date.now();
        isWatchingAd = true;
        document.getElementById('smart-link-btn').innerText = "Ø¬Ø§Ø±ÙŠ ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©...";
    }

    window.onfocus = function() {
        if (isWatchingAd) {
            let duration = (Date.now() - startTime) / 1000;
            if (duration >= 10) {
                document.getElementById('ad-locker').style.display = 'none';
                playMedia(videoQueue.id, videoQueue.title, videoQueue.url, videoQueue.thumb);
            } else {
                isWatchingAd = false;
                resetLocker();
            }
        }
    };

    function closeLocker() { document.getElementById('ad-locker').style.display = 'none'; isWatchingAd = false; }

    function playMedia(id, title, url, thumb) {
        saveToHistory(id, title, url, thumb);
        document.getElementById('player').style.display = 'flex';
        document.getElementById('v-title').innerText = title;
        document.getElementById('video-root').innerHTML = `<video controls autoplay style="width:100%;"><source src="${url}" type="video/mp4"></video>`;
    }

    function saveToHistory(id, title, url, thumb) {
        let history = JSON.parse(localStorage.getItem('user_history') || '[]');
        history = history.filter(item => item.id !== id);
        history.unshift({id, title, url, thumb});
        localStorage.setItem('user_history', JSON.stringify(history.slice(0, 10)));
    }

    function updateHistoryUI() {
        const grid = document.getElementById('history-grid');
        const history = JSON.parse(localStorage.getItem('user_history') || '[]');
        grid.innerHTML = history.length ? history.map(item => `<div class="card" onclick="lockVideo('${item.id}', '${item.title}', '${item.url}', '${item.thumb}')"><img src="${item.thumb}"><div class="card-info">${item.title}</div></div>`).join('') : '<div style="grid-column:1/span 2; text-align:center; padding:20px;">Ø§Ù„Ø³Ø¬Ù„ ÙØ§Ø±Øº</div>';
    }

    function showTab(evt, id) { 
        document.querySelectorAll('.grid').forEach(g => g.classList.remove('active')); 
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active'); evt.currentTarget.classList.add('active'); 
    }
    
    function toggleDarkMode() { document.getElementById('main-body').classList.toggle('dark-theme'); }
    
    function filterNow() {
        let val = document.getElementById('mainSearch').value.toLowerCase();
        document.querySelectorAll('.card').forEach(c => {
            let title = c.getAttribute('data-title') || "";
            c.style.display = title.toLowerCase().includes(val) ? 'block' : 'none';
        });
    }

    function backToMain(id) { 
        document.getElementById(id).style.display = 'none'; 
        if(id==='player') document.getElementById('video-root').innerHTML=''; 
    }
</script>
</body>
</html>
