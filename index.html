<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>[ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡]</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="https://pomf2.lain.la/f/odvlatpw.jpg">
    <meta name="theme-color" content="#e63946">

    <style>
        :root { 
            --main-red: #e63946; 
            --bg-page: #f8f9fa; 
            --card-bg: #ffffff;
            --text-main: #2b2d42;
            --search-bg: #f1f3f4;
            --gray: #888;
        }

        body.dark-theme { 
            --bg-page: #121212; 
            --card-bg: #1e1e1e;
            --text-main: #f1f1f1;
            --search-bg: #2d2d2d;
        }

        body { 
            background-color: var(--bg-page); color: var(--text-main); 
            font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; 
            transition: 0.3s; overflow-x: hidden;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø¨Ø­Ø« */
        .app-header { background: var(--card-bg); padding: 15px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
        .header-icons { display: flex; gap: 18px; align-items: center; }
        .app-title { font-size: 19px; font-weight: bold; color: var(--main-red); margin: 0; }
        .search-wrapper { padding: 5px 15px 15px 15px; background: var(--card-bg); }
        .search-input { width: 100%; padding: 12px 20px; border-radius: 25px; border: none; background: var(--search-bg); color: var(--text-main); outline: none; box-sizing: border-box; font-size: 14px; }

        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tabs { display: flex; background: var(--card-bg); margin: 15px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; color: var(--gray); font-weight: bold; cursor: pointer; font-size: 13px; }
        .tab-btn.active { background: var(--main-red); color: white; }

        /* Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„ÙƒØ±ÙˆØª */
        .grid { display: none; padding: 0 15px 15px 15px; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .grid.active { display: grid; }
        .card { background: var(--card-bg); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: 0.2s; position: relative; }
        .card img { width: 100%; height: 135px; object-fit: cover; border-bottom: 3px solid var(--main-red); }
        .card-info { padding: 10px; font-size: 12px; text-align: center; font-weight: bold; }

        /* Ù…ÙŠØ²Ø© Ø¹Ù„Ø§Ù…Ø© Ø¬Ø¯ÙŠØ¯ */
        .card.new::after {
            content: "Ø¬Ø¯ÙŠØ¯";
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--main-red);
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 3px 10px;
            border-radius: 20px;
            z-index: 5;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ */
        #series-overlay, #product-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-page); z-index: 2000; overflow-y: auto; }
        .series-banner { width: 100%; height: 220px; object-fit: cover; filter: brightness(0.7); }
        .series-details, .product-details { padding: 20px; position: relative; margin-top: -50px; background: var(--bg-page); border-radius: 30px 30px 0 0; }
        .ep-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; }
        .ep-card { background: var(--card-bg); border: 2px solid var(--search-bg); border-radius: 10px; padding: 15px 5px; text-align: center; font-weight: bold; font-size: 13px; }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†ØªØ¬ */
        .contact-btn { display: block; text-align: center; padding: 15px; margin-top: 15px; border-radius: 10px; text-decoration: none; color: white; font-weight: bold; }
        .whatsapp { background: #25D366; }
        .telegram { background: #0088cc; }

        /* Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        #player { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-page); z-index: 3000; flex-direction: column; overflow-y: auto; }
        .video-box { width: 100%; background: #000; position: sticky; top: 0; z-index: 3001; }
        .close-btn { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; border: none; padding: 8px 15px; border-radius: 20px; z-index: 4000; font-weight: bold; cursor: pointer; }

        .v-details { padding: 15px; background: var(--card-bg); }
        .interaction { display: flex; gap: 20px; border-top: 1px solid #eee; padding-top: 15px; margin-top: 10px; }
        .stat-item { display: flex; flex-direction: column; align-items: center; font-size: 11px; color: var(--gray); cursor: pointer; }
        .heart-icon.liked { color: var(--main-red); }

        /* Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙˆØ§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª */
        .comments-section { padding: 15px; background: var(--card-bg); margin-top: 10px; border-bottom: 1px solid #eee; }
        .comment-header { font-weight: bold; font-size: 14px; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .comment-box { display: flex; gap: 10px; margin-bottom: 20px; }
        .comment-input { flex: 1; border: none; background: var(--search-bg); padding: 10px 15px; border-radius: 20px; font-size: 13px; outline: none; color: var(--text-main); }
        .comment-item { display: flex; gap: 12px; margin-bottom: 15px; }
        .avatar-circle { width: 32px; height: 32px; border-radius: 50%; background: #666; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 11px; flex-shrink: 0; }
        .comment-text-wrap { background: var(--search-bg); padding: 8px 12px; border-radius: 12px; font-size: 13px; flex: 1; }
        .suggested-section { padding: 15px; background: var(--card-bg); margin-top: 2px; }
        .suggested-title-head { font-weight: bold; font-size: 14px; margin-bottom: 15px; color: var(--gray); }
        .suggested-card { display: flex; gap: 12px; margin-bottom: 15px; cursor: pointer; }
        .suggested-thumb { width: 140px; height: 80px; border-radius: 8px; object-fit: cover; flex-shrink: 0; }
        .suggested-info { display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .suggested-title { font-size: 13px; font-weight: bold; color: var(--text-main); line-height: 1.3; }
        .suggested-meta { font-size: 11px; color: var(--gray); }
        
        .empty-msg { grid-column: 1 / span 2; text-align: center; padding: 40px; color: var(--gray); font-size: 14px; }
    </style>
</head>
<body id="main-body">

<div class="app-header">
    <div class="header-icons">
        <span onclick="toggleDarkMode()">ğŸŒ™</span>
        <span onclick="document.getElementById('mainSearch').focus()">ğŸ”</span>
    </div>
    <div class="app-title">[ÙˆØ§ØªÙ€Ø¨Ù€Ø§Ø¯ Ø§Ù„Ù€ÙÙ€Ù‚Ù€Ø±Ø§Ø¡]</div>
</div>

<div class="search-wrapper">
    <input type="text" id="mainSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚ØµØ© Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„..." onkeyup="filterNow()">
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab(event, 'watt-grid')">ğŸ“– Ø§Ù„Ù‚ØµØµ</button>
    <button class="tab-btn" onclick="showTab(event, 'ser-grid')">ğŸ¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
    <button class="tab-btn" onclick="showTab(event, 'prod-grid')">ğŸ›ï¸ Ù…Ù†ØªØ¬Ø§ØªÙŠ</button>
    <button class="tab-btn" onclick="showTab(event, 'history-grid'); updateHistoryUI();">ğŸ•’ Ø§Ù„Ø³Ø¬Ù„</button>
</div>

<div class="grid active" id="watt-grid">
    <div class="card new" data-title="ØºØ²Ø§Ù„Ø© ÙÙŠ Ø¹Ø±ÙŠÙ† Ø§Ù„Ø§Ø³Ø¯" onclick="playMedia('gh_1', 'ØºØ²Ø§Ù„Ø© ÙÙŠ Ø¹Ø±ÙŠÙ† Ø§Ù„Ø§Ø³Ø¯', 'https://pomf2.lain.la/f/asn9tb0.mp4', 'https://pomf2.lain.la/f/odvlatpw.jpg')">
        <img src="https://pomf2.lain.la/f/odvlatpw.jpg">
        <div class="card-info">Ù‚ØµØ© ØºØ²Ø§Ù„Ø© ÙÙŠ Ø¹Ø±ÙŠÙ† Ø§Ù„Ø§Ø³Ø¯</div>
    </div>
</div>

<div class="grid" id="ser-grid">
    <div class="card" data-title="Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶" onclick="openSeries('series_sea', 'Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶', 'https://pomf2.lain.la/f/2njdz3ym.jpg', ['Ø­Ù„Ù‚Ø© 1', 'Ø­Ù„Ù‚Ø© 2', 'Ø­Ù„Ù‚Ø© 3'])">
        <img src="https://pomf2.lain.la/f/2njdz3ym.jpg">
        <div class="card-info">Ù…Ø³Ù„Ø³Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶</div>
    </div>
</div>

<div class="grid" id="prod-grid">
    <div class="card" data-title="Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙˆÙ„" onclick="openProduct('Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙˆÙ„', 'Ù‡Ù†Ø§ ÙˆØµÙ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙˆÙÙˆØ§Ø¦Ø¯Ù‡.', 'https://pomf2.lain.la/f/odvlatpw.jpg')">
        <img src="https://pomf2.lain.la/f/odvlatpw.jpg">
        <div class="card-info">Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙˆÙ„</div>
    </div>
</div>

<div class="grid" id="history-grid">
    </div>

<div id="product-overlay">
    <button class="close-btn" onclick="backToMain('product-overlay')">Ø±Ø¬ÙˆØ¹</button>
    <img id="p-img" class="series-banner">
    <div class="product-details">
        <h2 id="p-title" style="margin:0;"></h2>
        <p id="p-desc" style="color:var(--gray); font-size:14px; margin-top:15px; line-height:1.6;"></p>
        <a id="p-wa" href="#" class="contact-btn whatsapp">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
        <a id="p-tg" href="#" class="contact-btn telegram">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a>
    </div>
</div>

<div id="series-overlay">
    <button class="close-btn" onclick="backToMain('series-overlay')">Ø±Ø¬ÙˆØ¹</button>
    <img id="ser-img" class="series-banner">
    <div class="series-details">
        <h2 id="ser-title" style="margin:0;"></h2>
        <p style="color:var(--gray); font-size:13px;">Ø§Ø®ØªØ± Ø§Ù„Ø­Ù„Ù‚Ø© Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</p>
    </div>
    <div class="ep-grid" id="ep-list"></div>
</div>

<div id="player">
    <button class="close-btn" onclick="backToMain('player')">Ø¥ØºÙ„Ø§Ù‚</button>
    <div class="video-box" id="video-root"></div>
    <div class="v-details">
        <div id="v-title" style="font-weight:bold; font-size:16px;"></div>
        <div id="v-views" style="color:var(--gray); font-size:12px; margin-top:5px;"></div>
        <div class="interaction">
            <div class="stat-item" onclick="this.querySelector('.heart-icon').classList.toggle('liked')">
                <span class="heart-icon">â¤</span><span>Ø¥Ø¹Ø¬Ø§Ø¨</span>
            </div>
            <div class="stat-item"><span>ğŸ‘</span><span id="v-watch"></span></div>
        </div>
    </div>
    <div class="comments-section">
        <div class="comment-header">ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</div>
        <div id="comments-list"></div>
    </div>
    <div class="suggested-section">
        <div class="suggested-title-head">Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ØªØ§Ù„ÙŠØ© (Ù…Ù‚ØªØ±Ø­ Ù„Ùƒ)</div>
        <div id="suggested-list"></div>
    </div>
</div>

<script>
    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø¬Ù„
    function saveToHistory(id, title, url, thumb) {
        let history = JSON.parse(localStorage.getItem('user_history') || '[]');
        // Ø­Ø°Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
        history = history.filter(item => item.id !== id);
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        history.unshift({id, title, url, thumb});
        // Ø­ÙØ¸ Ø¢Ø®Ø± 10 ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙÙ‚Ø·
        if(history.length > 10) history.pop();
        localStorage.setItem('user_history', JSON.stringify(history));
    }

    function updateHistoryUI() {
        const grid = document.getElementById('history-grid');
        const history = JSON.parse(localStorage.getItem('user_history') || '[]');
        if(history.length === 0) {
            grid.innerHTML = '<div class="empty-msg">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹</div>';
            return;
        }
        grid.innerHTML = history.map(item => `
            <div class="card" onclick="playMedia('${item.id}', '${item.title}', '${item.url}', '${item.thumb}')">
                <img src="${item.thumb}">
                <div class="card-info">${item.title}</div>
            </div>
        `).join('');
    }

    function backToMain(overlayId) {
        document.getElementById(overlayId).style.display = 'none';
        if (overlayId === 'player') document.getElementById('video-root').innerHTML = '';
    }

    function openProduct(title, desc, img) {
        document.getElementById('product-overlay').style.display = 'block';
        document.getElementById('p-img').src = img;
        document.getElementById('p-title').innerText = title;
        document.getElementById('p-desc').innerText = desc;
        document.getElementById('p-wa').href = "https://wa.me/9647860526345";
        document.getElementById('p-tg').href = "https://t.me/Z_U_L_f_I_Q_A";
    }

    function openSeries(id, title, img, eps) {
        document.getElementById('series-overlay').style.display = 'block';
        document.getElementById('ser-img').src = img;
        document.getElementById('ser-title').innerText = title;
        document.getElementById('ep-list').innerHTML = eps.map((e, i) => 
            `<div class="ep-card" onclick="playMedia('${id}_${i}', '${title} - ${e}', 'https://pomf2.lain.la/f/pgzui0yw.mp4', '${img}')">${e}</div>`
        ).join('');
    }

    function playMedia(id, title, url, thumb) {
        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
        saveToHistory(id, title, url, thumb);
        
        window.open("https://twigcrucialpal.com/kvwft44afa?key=cb80200a80e072a4d94407f211fa613c", '_blank');
        setTimeout(() => {
            document.getElementById('player').style.display = 'flex';
            document.getElementById('v-title').innerText = title;
            let real = parseInt(localStorage.getItem('v_'+id) || 0) + 1;
            localStorage.setItem('v_'+id, real);
            document.getElementById('v-views').innerText = (1000 + real).toLocaleString() + " Ù…Ø´Ø§Ù‡Ø¯Ø©";
            document.getElementById('v-watch').innerText = Math.floor(Math.random()*100+50) + " ÙŠØªØ§Ø¨Ø¹ÙˆÙ† Ø§Ù„Ø¢Ù†";
            document.getElementById('video-root').innerHTML = `<video id="mainVid" controls autoplay style="width:100%;"><source src="${url}" type="video/mp4"></video>`;
            loadComments();
            loadSuggestions();
        }, 3000);
    }

    function loadComments() {
        const list = document.getElementById('comments-list');
        list.innerHTML = `<div class="comment-item"><div class="avatar-circle">M</div><div class="comment-text-wrap"><div style="font-weight:bold; font-size:11px; margin-bottom:2px;">Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ</div><div>Ø¹Ø§Ø´Øª Ø§ÙŠØ¯Ùƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„ØªØ±ØªÙŠØ¨!</div></div></div>`;
    }

    function loadSuggestions() {
        const list = document.getElementById('suggested-list');
        const items = [{t: "ØºØ²Ø§Ù„Ø© ÙÙŠ Ø¹Ø±ÙŠÙ† Ø§Ù„Ø§Ø³Ø¯ - Ø§Ù„Ø¬Ø²Ø¡ 2", img: "https://pomf2.lain.la/f/odvlatpw.jpg", v: "2.4K"}];
        list.innerHTML = items.map(item => `<div class="suggested-card" onclick="playMedia('s_id', '${item.t}', '#', '${item.img}')"><img src="${item.img}" class="suggested-thumb"><div class="suggested-info"><div class="suggested-title">${item.t}</div><div class="suggested-meta">${item.v} Ù…Ø´Ø§Ù‡Ø¯Ø©</div></div></div>`).join('');
    }

    function showTab(evt, id) { 
        document.querySelectorAll('.grid').forEach(g => g.classList.remove('active')); 
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active'); evt.currentTarget.classList.add('active'); 
    }
    function toggleDarkMode() { document.getElementById('main-body').classList.toggle('dark-theme'); }
    function filterNow() {
        let val = document.getElementById('mainSearch').value.toLowerCase();
        document.querySelectorAll('.card').forEach(c => c.style.display = c.getAttribute('data-title').toLowerCase().includes(val) ? 'block' : 'none');
    }
</script>
</body>
</html>
