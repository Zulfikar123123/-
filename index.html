<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>[ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡]</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡">
    <link rel="apple-touch-icon" href="https://pomf2.lain.la/f/odvlatpw.jpg">
    <link rel="icon" href="https://pomf2.lain.la/f/odvlatpw.jpg">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#e63946">

    <style>
        :root { 
            --main-red: #e63946; 
            --bg-page: #f8f9fa; 
            --card-bg: #ffffff;
            --text-color: #2b2d42;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .dark-mode { 
            --bg-page: #121212; 
            --card-bg: #1e1e1e;
            --text-color: #f1f1f1;
            --shadow: 0 4px 15px rgba(0,0,0,0.4);
        }

        body { background-color: var(--bg-page); color: var(--text-color); font-family: sans-serif; margin: 0; padding: 0; transition: 0.3s; overflow-x: hidden; }

        .header { background: var(--card-bg); padding: 15px; text-align: center; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 1000; }
        .header h1 { margin: 0; font-size: 20px; color: var(--main-red); }

        .controls { padding: 10px 15px; display: flex; gap: 10px; align-items: center; }
        #searchBar { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #ddd; outline: none; background: var(--card-bg); color: var(--text-color); }
        .theme-toggle { background: var(--main-red); color: white; border: none; padding: 10px; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; }

        .tabs-container { display: flex; background: var(--card-bg); margin: 10px 15px; border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; color: #888; font-weight: bold; cursor: pointer; font-size: 13px; }
        .tab-btn.active { background: var(--main-red); color: white; }

        .section-title { padding: 0 20px; font-size: 15px; font-weight: bold; color: var(--main-red); margin-top: 10px; }

        .container { padding: 15px; display: none; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .container.active { display: grid; }

        .video-card { background: var(--card-bg); border-radius: 15px; overflow: hidden; box-shadow: var(--shadow); position: relative; transition: 0.3s; }
        .video-card img { width: 100%; height: 125px; object-fit: cover; }
        .video-info { padding: 10px; font-size: 12px; text-align: center; font-weight: bold; min-height: 35px; }
        .badge-new { position: absolute; top: 8px; right: 8px; background: var(--main-red); color: white; font-size: 10px; padding: 3px 8px; border-radius: 5px; font-weight: bold; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© */
        #install-banner {
            display: none; position: fixed; bottom: 20px; left: 15px; right: 15px;
            background: var(--card-bg); padding: 15px; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 99999;
            border: 2px solid var(--main-red); align-items: center; gap: 12px;
            animation: slideUp 0.6s ease-out;
        }
        #install-banner img { width: 45px; height: 45px; border-radius: 10px; }
        #install-banner .text { flex: 1; font-size: 12px; font-weight: bold; line-height: 1.4; }
        #install-banner button { background: var(--main-red); color: white; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        #player-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-page); z-index: 10000; }
        .close-btn { position: absolute; top: 20px; left: 20px; background: var(--main-red); color: white; border: none; padding: 10px 20px; border-radius: 30px; font-weight: bold; }
        iframe { width: 100%; height: 100%; border: none; display: none; }
    </style>
</head>
<body>

<div id="install-banner">
    <img src="https://pomf2.lain.la/f/odvlatpw.jpg">
    <div class="text">Ø«Ø¨Ù‘Øª ØªØ·Ø¨ÙŠÙ‚ [ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡] Ù„ØªØ¬Ø±Ø¨Ø© Ø£Ø³Ø±Ø¹ ÙˆØ£ÙØ¶Ù„!</div>
    <button onclick="presentInstall()">ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¢Ù†</button>
</div>

<div class="header"><h1> [ÙˆØ§ØªÙ€Ø¨Ù€Ø§Ø¯ Ø§Ù„Ù€ÙÙ€Ù‚Ù€Ø±Ø§Ø¡] </h1></div>

<div class="controls">
    <input type="text" id="searchBar" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ù‚ØµØ© Ø£Ùˆ Ø­Ù„Ù‚Ø©..." onkeyup="filterContent()">
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
</div>

<div id="recent-title" class="section-title" style="display: none;">âŒš Ø´Ø§Ù‡Ø¯ØªÙ‡ Ù…Ø¤Ø®Ø±Ø§Ù‹</div>
<div class="container active" id="recent-section"></div>

<div class="tabs-container">
    <button class="tab-btn active" onclick="switchTab(event, 'wattpad-section')">ğŸ“– Ù‚ØµØµ ÙˆØ§ØªØ¨Ø§Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Ø¡</button>
    <button class="tab-btn" onclick="switchTab(event, 'turkish-section')">ğŸ¬ Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù‚ØµØ© Ø¹Ø´Ù‚</button>
</div>

<div class="container active" id="wattpad-section"></div>
<div class="container" id="turkish-section"></div>

<div id="player-overlay">
    <button class="close-btn" onclick="closePlayer()">Ø±Ø¬ÙˆØ¹</button>
    <div style="text-align: center; margin-top: 50%; padding: 20px;" id="waiting-screen">
        <h2 style="color: var(--main-red);">ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ø§Ù†</h2>
        <p>Ø¨Ù‚ÙŠ 10 Ø«ÙˆØ§Ù†Ù Ù„ÙØªØ­ Ø§Ù„Ù…Ù‚Ø·Ø¹..</p>
        <button style="background: #28a745; color: white; padding: 15px; border: none; border-radius: 10px; width: 80%; font-weight: bold;" onclick="openAd()">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ÙØªØ­</button>
    </div>
    <iframe id="video-iframe" allowfullscreen></iframe>
</div>

<script>
    const wattpadVideos = [
        { id: 1, title: "ØºØ²Ø§Ù„Ø© ÙÙŠ Ø¹Ø±ÙŠÙ† Ø§Ù„Ø§Ø³Ø¯ - Ø§Ù„Ø£Ø®ÙŠØ±", img: "https://pomf2.lain.la/f/odvlatpw.jpg", url: "https://pomf2.lain.la/f/asn9tb0.mp4", isNew: true },
        { id: 2, title: "Ø®Ø° Ø¨ÙŠØ¯ÙŠ Ø§Ù„Ù‰ Ø§Ø­Ø¶Ø§Ù†Ùƒ - Ø¬3", img: "https://pomf2.lain.la/f/2njdz3ym.jpg", url: "https://pomf2.lain.la/f/jlyrjnqz.mp4", isNew: false }
    ];

    const turkishVideos = [
        { id: 4, title: "Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø­Ø± Ø³ÙˆÙ ÙŠÙÙŠØ¶ - Ø­1", img: "https://pomf2.lain.la/f/2njdz3ym.jpg", url: "https://pomf2.lain.la/f/pgzui0yw.mp4", isNew: true }
    ];

    let deferredPrompt;
    let currentVideo = null;
    let startTime = 0;
    let timerStarted = false;
    let recentlyWatched = JSON.parse(localStorage.getItem('recent_v3')) || [];

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        setTimeout(() => { document.getElementById('install-banner').style.display = 'flex'; }, 3000);
    });

    function presentInstall() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            document.getElementById('install-banner').style.display = 'none';
        }
    }

    function init() {
        renderVideos(wattpadVideos, 'wattpad-section');
        renderVideos(turkishVideos, 'turkish-section');
        renderRecent();
        if(localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
    }

    function renderVideos(data, containerId) {
        document.getElementById(containerId).innerHTML = data.map(vid => `
            <div class="video-card" data-title="${vid.title}" onclick="preparePlayer(${JSON.stringify(vid).replace(/"/g, '&quot;')})">
                ${vid.isNew ? '<div class="badge-new">Ø¬Ø¯ÙŠØ¯</div>' : ''}
                <img src="${vid.img}">
                <div class="video-info">${vid.title}</div>
            </div>
        `).join('');
    }

    function switchTab(evt, sectionId) {
        document.querySelectorAll('.container').forEach(c => c.id !== 'recent-section' && (c.style.display = 'none'));
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.getElementById(sectionId).style.display = 'grid';
        evt.currentTarget.classList.add('active');
    }

    function filterContent() {
        let q = document.getElementById('searchBar').value.toLowerCase();
        document.querySelectorAll('.video-card').forEach(c => {
            c.style.display = c.getAttribute('data-title').toLowerCase().includes(q) ? 'block' : 'none';
        });
    }

    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }

    function preparePlayer(vid) {
        currentVideo = vid;
        saveToRecent(vid);
        document.getElementById('player-overlay').style.display = 'block';
        document.getElementById('waiting-screen').style.display = 'block';
        document.getElementById('video-iframe').style.display = 'none';
    }

    function saveToRecent(vid) {
        recentlyWatched = recentlyWatched.filter(v => v.id !== vid.id);
        recentlyWatched.unshift(vid);
        if(recentlyWatched.length > 2) recentlyWatched.pop();
        localStorage.setItem('recent_v3', JSON.stringify(recentlyWatched));
        renderRecent();
    }

    function renderRecent() {
        if(recentlyWatched.length > 0) {
            document.getElementById('recent-title').style.display = 'block';
            renderVideos(recentlyWatched, 'recent-section');
        }
    }

    function openAd() {
        window.open("https://twigcrucialpal.com/kvwft44afa?key=cb80200a80e072a4d94407f211fa613c", '_blank');
        startTime = new Date().getTime();
        timerStarted = true;
    }

    window.onfocus = function() {
        if (timerStarted && Math.floor((new Date().getTime() - startTime) / 1000) >= 10) {
            document.getElementById('waiting-screen').style.display = 'none';
            document.getElementById('video-iframe').src = currentVideo.url;
            document.getElementById('video-iframe').style.display = 'block';
            timerStarted = false;
        }
    };

    function closePlayer() { document.getElementById('player-overlay').style.display = 'none'; timerStarted = false; }

    init();
</script>
</body>
</html>
